<% layout('layouts/boilerplate') %>

<div class="register row d-flex align-items-center">
	<div class="col-md-6 offset-md-3 col-xl-4 offset-xl-4 pb-3">
		<div class="card shadow">
			<img
				class="card-img-top"
				alt=""
				src="https://images.unsplash.com/photo-1525811902-f2342640856e?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1171&q=80"
			/>
			<div class="card-body">
				<h4 class="card-title">Register</h4>
				<form
					action="/register"
					method="POST"
					class="validated-form"
					novalidate
				>
					<div class="mb-3">
						<label for="username" class="form-label">Username</label>
						<input
							type="text"
							name="user[username]"
							id="usename"
							class="form-control"
							required
							autofocus
						/>
					</div>
					<div class="mb-3">
						<label for="email" class="form-label">Email</label>
						<input
							type="email"
							name="user[email]"
							id="email"
							class="form-control"
							required
						/>
					</div>
					<div class="mb-3">
						<label for="password" class="form-label">Password</label>
						<div class="input-group mb-4">
							<input
								type="password"
								name="user[password]"
								id="password"
								class="form-control"
								required
								pattern="^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$"
							/>
							<button
								class="btn btn-outline-secondary rounded-end"
								type="button"
								id="togglePassword"
							>
								<i class="bi bi-eye"></i>
							</button>
							<div class="invalid-feedback">
								Password must be at least 8 characters long and contain at least
								one letter, one number, and one special character
							</div>
						</div>
					</div>
					<button class="btn btn-success w-100">Register</button>
					<div class="py-3 text-center">
						<span class="">have an account?</span>
						<a
							href="/login"
							class="text-decoration-none p-0 border-bottom border-primary"
							>LOGIN</a
						>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>

<script>
	const togglePassword = document.getElementById('togglePassword');

	if (togglePassword) {
		togglePassword.addEventListener('click', function () {
			const passwordInput = document.getElementById('password');
			const type =
				passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
			passwordInput.setAttribute('type', type);
			this.innerHTML =
				type === 'password'
					? '<i class="bi bi-eye"></i>'
					: '<i class="bi bi-eye-slash"></i>';
		});
	}
</script>
